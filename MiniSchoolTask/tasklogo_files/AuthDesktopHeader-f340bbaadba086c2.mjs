"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[82952],{215886:(e,t,n)=>{n.d(t,{Z:()=>o});var s=n(340523),i=n(554786);let o=e=>{let{checkExperiment:t}=(0,s.F)(),n=(0,i.ZP)();if("phone"===n||"tablet"===n){let n=t("mweb_metrics_dau_ping").group;return n===e||n.startsWith("employee")}let o=t("web_metrics_dau_ping").group;return o===e||o.startsWith("employee")}},568803:(e,t,n)=>{n.d(t,{Z:()=>s});function s(e){return"object"==typeof e&&null!==e&&"url"in e&&"media"in e}},433058:(e,t,n)=>{n.d(t,{Z:()=>r});var s=n(667294),i=n(214877),o=n(525364);let r=e=>{let t=(0,s.useRef)(!1),{logContextEvent:n}=(0,i.v)(),{viewType:r,viewParameter:l}=(0,o.SU)();(0,s.useEffect)(()=>{Object.entries(e).length>0&&!t.current&&r&&(n({event_type:13,view_type:r,view_parameter:l,...e}),t.current=!0)})}},98769:(e,t,n)=>{n.r(t),n.d(t,{Header:()=>et,default:()=>en});var s=n(667294),i=n(616550),o=n(883119),r=n(334589),l=n(406718),a=n(3808),c=n(620527),d=n(215886),h=n(324358),u=n(568803),p=n(920434),_=n(619370),x=n(422317),m=n(140017),f=n(741983),b=n(729817),g=n(340523),T=n(5859),P=n(37156),j=n(623409),y=n(624797),A=n(794109),S=n(239821),w=n(906906),C=n(214877),v=n(401429),E=n(97630),k=n(785893);let I=({isSelected:e,onClick:t})=>{let n=(0,m.ZP)(),{logContextEvent:a}=(0,C.v)(),c=(0,l.Z)(!0),d=(0,s.useRef)(null),h=(0,s.useRef)(null),[u,p]=(0,s.useState)(!1),_=(0,i.k6)(),x=e=>{a({event_type:101,component:13988,element:e}),p(!1)};return(0,k.jsxs)(s.Fragment,{children:[(0,k.jsx)(o.xu,{ref:d,"data-test-id":"create-tab",children:(0,k.jsx)(E.Z,{contextData:{event:101,component:8,element:12969},iconEnd:c?void 0:"arrow-down",isSelected:e,onClick:e=>{t?.(),c?(a({event_type:101,component:13988,element:10949}),e.preventDefault(),_.push({pathname:(0,r.Z)(c),state:{entry_type:"navbar_plus_button"}})):p(e=>!e)},role:c?"link":"button",text:n._('Create', 'header.section.createTab', 'visual label for Create tab button in nav bar')})}),d&&(0,k.jsx)(v.Z,{eligibleIds:[504669],eligibleTypes:[8],placementId:1000109,children:({complete:e,dismiss:t,experience:n})=>{let{display_data:s}=n;return h.current={complete:e},s?.disappear_time&&setTimeout(()=>{t()},s.disappear_time),(0,k.jsx)(o.xu,{zIndex:new o.Ry(10),children:(0,k.jsx)(o.Li,{accessibilityLabel:"PopoverEducational",anchor:d.current,idealDirection:"down",message:s?.text,onDismiss:()=>{}})})}}),u&&(0,k.jsxs)(o.Lt,{anchor:d.current,id:"header-create-dropdown",idealDirection:"down",onDismiss:()=>{p(!1)},zIndex:new o.Ry(1e3),children:[(0,k.jsx)(o.Lt.Link,{dataTestId:"create-idea-pin",href:"/idea-pin-builder/",onClick:()=>x(10949),option:{value:"ideaPin",label:n._('Create Idea Pin', 'header.headerCreateMenu.ideaPinBtn', 'Create Idea Pin button')}}),(0,k.jsx)(o.Lt.Link,{dataTestId:"create-static-pin",href:"/pin-builder/",onClick:()=>x(10643),option:{value:"pin",label:n._('Create Pin', 'header.headerCreateMenu.pinBtn', 'Create Pin button')}})]})]})};var B=n(796796),R=n(391322),O=n(677801),Z=n(32810),L=n(477458),z=n(983983),D=n(953565);function H({tabs:e}){let t=(0,m.ZP)(),[n,i]=(0,s.useState)(!1),{hovered:r,onMouseEnter:l,onMouseLeave:a}=(0,L.Z)(),c=(0,s.useRef)(),d=e.find(e=>e.isSelected);d||(d=e.find(e=>"home"===e.key));let h=()=>i(!1);return(0,k.jsxs)(s.Fragment,{children:[(0,k.jsx)(o.xu,{ref:c,color:n?"dark":r?"secondary":void 0,"data-test-id":"HeaderCollapsedTabs",display:"inlineBlock",flex:"none",height:48,marginStart:2,minWidth:60,onMouseEnter:l,onMouseLeave:a,rounding:6,children:(0,k.jsx)(o.iP,{fullHeight:!0,onTap:()=>{i(!n),d?.incrementKey&&(0,D.nP)(d.incrementKey)},rounding:6,children:(0,k.jsxs)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{padding:"14px 14px",whiteSpace:"nowrap"}},display:"flex",flex:"none",justifyContent:"center",children:[(0,k.jsx)(o.xv,{align:"center",color:n?"inverse":"default",overflow:"normal",weight:"bold",children:d?.text}),(0,k.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{marginTop:"1px"}},marginStart:2,children:(0,k.jsx)(o.JO,{accessibilityLabel:t._('Open tab menu', 'header.tabMenu.downArrow', 'accessibility label for icon indicating more tabs are available in a menu'),color:n?"inverse":"default",icon:"arrow-down",size:12})})]})})}),n&&(0,k.jsx)(o.xu,{"data-test-id":"HeaderCollapsedTabsMenu",children:(0,k.jsx)(o.Lt,{anchor:c.current,disableMobileUI:!0,id:"HeaderCollapsedTabsMenu",onDismiss:h,zIndex:new o.H3([new o.Ry(z.fe)]),children:e.map(({isSelected:e,key:n,text:s,url:i})=>(0,k.jsx)(o.Lt.Link,{href:i,onClick:h,option:{value:n,label:s},children:(0,k.jsxs)(o.kC,{alignItems:"center",width:"100%",children:[(0,k.jsx)(o.kC.Item,{flex:"grow",children:(0,k.jsx)(o.xv,{weight:"bold",children:s})}),(0,k.jsx)(o.JO,{accessibilityLabel:t._('Selected option', 'flyoutMenu.selectedOptionCheckmark', 'Accessibility label for checkmark icon indicating which option is currently selected'),color:"default",icon:e?"check":void 0,inline:!0})]})},n))})})]})}var N=n(4058),U=n(276235),M=n(757640);function F({children:e,isSelected:t}){let{isLoaded:n,data:s}=(0,M.Z)({name:"ApiResource",options:{url:"/v3/feeds/homefeed/badge/"},noCache:!0});return e(!!(n&&s)&&!t)}function G({anchor:e}){let t=(0,m.ZP)();return(0,k.jsx)(o.Li,{anchor:e,idealDirection:"down",message:t._('Your home feed will show ideas for your new interests', 'Flyout message on Pinterest logo on Header', 'Flyout message on Pinterest logo on Header'),onDismiss:()=>{}})}var K=n(249222),W=n(509474),Y=n(433058),X=n(454051);function V({isSelected:e,onClick:t}){let n=(0,m.ZP)();(0,Y.Z)({component:8,element:11674});let s=n._('Explore', 'header.section.exploreTab', 'visual label for Explore tab button in nav bar');return(0,k.jsx)(E.Z,{contextData:{event:101,component:8,element:11674},dataTestId:"today-tab",isSelected:e,onClick:t,showNotifBadge:!0,text:s,url:(0,X.tG)()})}var q=n(961550),Q=n(19549),$=n(909846),J=n(917198);function ee(e,t,n){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class et extends s.Component{constructor(e){super(e),ee(this,"mounted",!1),ee(this,"iconRoutes",(0,B.Z)({username:this.props.viewer.username,isIdeaPinRenamingEnabled:this.props.isIdeaPinRenamingEnabled})),ee(this,"logoButtonRef",(0,s.createRef)()),ee(this,"profileRef",(0,s.createRef)()),ee(this,"getCollapsedTabList",()=>[{key:"home",text:this.props.i18n._('Home', 'header.homeButton.section', 'accessibility label for home button in nav bar'),url:"/",incrementKey:z.sp.HOME_BUTTON_COLLAPSED_TAB},...this.props.isTodayTabEligible?[{key:"explore",text:this.props.i18n._('Explore', 'header.section.exploreTab', 'visual label for Explore tab button in nav bar'),url:(0,X.tG)(),incrementKey:z.sp.TODAY_TAB_COLLAPSED_TAB}]:[],{key:"create",text:this.props.i18n._('Create', 'header.section.createTab', 'visual label for Create tab button in nav bar'),url:(0,r.Z)(this.props.isIdeaPinRenamingEnabled),incrementKey:z.sp.CREATE_TAB_COLLAPSED_TAB}]),ee(this,"handleResize",(0,p.Z)(()=>{if(this.mounted){let e=document.getElementById("searchBoxContainer")?.offsetWidth||0;this.setState({searchIconOnly:e<=300}),window.innerWidth<850&&this.props.requestContext?this.setState({shrinkSearchbox:!0}):this.state.shrinkSearchbox&&this.setState({searchIconOnly:!1,shrinkSearchbox:!1})}},100)),ee(this,"fetchUserAccounts",()=>{let{userAccountsRetrieved:e,viewer:t}=this.props;t.isAuth&&(0,b.dD)(t).then(t=>{e(t)})}),this.state={headerIconExperience:null,searchIconOnly:!1,selected:(0,R.Z)({pathname:e.location.pathname,iconRoutes:this.iconRoutes}),showLeftTabs:!0,showToolTip:!1,shrinkSearchbox:!1}}componentDidMount(){let{headerButtonContext:e,isMetricDAUExperimentEnabled:t}=this.props;this.mounted=!0,this.fetchUserAccounts(),this.handleResize(),window.addEventListener("resize",this.handleResize),(0,s.startTransition)(()=>{e.setLogoButtonRef(this.logoButtonRef.current)}),t&&(0,h.Z)()}componentDidUpdate(e){let{location:t,showToolTipExp:n}=this.props;if(e.location.pathname!==t.pathname){let e=(0,R.Z)({pathname:t.pathname,iconRoutes:this.iconRoutes});this.setState({selected:e})}e.showToolTipExp===n||this.state.showToolTip||this.setState({showToolTip:!0})}componentWillUnmount(){window.removeEventListener("resize",this.handleResize),this.mounted=!1}renderSearchBox(){let{history:e}=this.props,{searchIconOnly:t,shrinkSearchbox:n}=this.state;return e?.push?(0,k.jsx)(w.Z,{handleIconOnlyChange:e=>this.setState({showLeftTabs:t&&e}),iconOnly:t,widthType:n?"shrink":void 0}):null}renderButtons(){let{currentSite:e,headerButtonContext:t,isPersistentArrUpsellEnabled:n,isVerticalNavEnabled:i,startPrefetchTimer:r,cancelPrefetchTimer:l,onNavigateToHomefeed:a,onMouseDownHomefeedPrefetch:c,onNavigateToHomefeedMousedownPrefetch:d}=this.props,{headerIconExperience:h,selected:u,showLeftTabs:p,showToolTip:m,shrinkSearchbox:f}=this.state;return i?(0,k.jsx)(o.xu,{alignItems:"center",column:12,display:"flex",height:56,children:this.renderSearchBox()}):(0,k.jsxs)(o.xu,{alignItems:"center",column:12,display:"flex",height:56,children:[(0,k.jsxs)(o.xu,{children:[(0,k.jsx)(o.xu,{ref:this.logoButtonRef,"aria-hidden":!0,children:(0,k.jsx)(U.Z,{cancelPrefetchTimer:l,headerIconExperience:h,onClick:()=>{(0,D.nP)(z.sp.PINTEREST_LOGO),a(),d?.()},onMouseDown:c,startPrefetchTimer:r},"HomeButton")}),m&&(0,k.jsx)(_.default,{anchor:this.logoButtonRef.current,experienceIds:[500613],noClickToDismiss:!0,placementId:19,shouldTimeoutDismiss:!0}),t.isTooltipOnLogoButtonShown&&(0,k.jsx)(G,{anchor:this.logoButtonRef.current})]}),!f&&p&&(0,k.jsxs)(s.Fragment,{children:[(0,k.jsx)(F,{isSelected:"home"===u,children:e=>(0,k.jsx)(E.Z,{dataTestId:"home-tab",isSelected:"home"===u,onClick:()=>(0,D.nP)(z.sp.HOME_TAB),showNotifBadge:e,text:this.props.i18n._('Home', 'header.homeButton.section', 'accessibility label for home button in nav bar'),url:"/"})}),this.props.isTodayTabEligible&&(0,k.jsx)(V,{isSelected:"today"===u,onClick:()=>(0,D.nP)(z.sp.TODAY_TAB)}),(0,k.jsx)(I,{isSelected:"create"===u,onClick:()=>(0,D.nP)(z.sp.CREATE_TAB)})]}),f&&p&&(0,k.jsx)(H,{tabs:this.getCollapsedTabList().map(e=>({isSelected:u===e.key,...e}))}),this.renderSearchBox(),(0,k.jsxs)(o.xu,{alignItems:"center","data-test-id":"button-container",display:"flex",children:[(0,k.jsx)(W.F,{value:{currentSite:e},children:(0,k.jsx)(Q.Z,{onConversationsClick:()=>(0,D.nP)(z.sp.CONVERSATIONS),onNewsClick:()=>(0,D.nP)(z.sp.NEWS)})}),(0,k.jsxs)(s.Fragment,{children:[(0,k.jsx)(o.xu,{ref:this.profileRef,children:(0,k.jsx)(K.Z,{children:(0,k.jsx)(O.Z,{isSelected:"profile"===u,onClick:()=>(0,D.nP)(z.sp.AVATAR)})})}),(0,k.jsx)(x.Z,{currentSite:e,isPersistentArrUpsellEnabled:n,onClick:()=>(0,D.nP)(z.sp.ACCOUNT_OPTIONS)})]})]})]})}renderHomeButtonAndAccountSwitcher(){let{currentSite:e,headerButtonContext:t,isPersistentArrUpsellEnabled:n}=this.props,{headerIconExperience:i,selected:r,showToolTip:l}=this.state;return(0,k.jsxs)(o.xu,{alignItems:"center",column:12,display:"flex",height:56,children:[(0,k.jsxs)(o.xu,{children:[(0,k.jsx)(o.xu,{ref:this.logoButtonRef,"aria-hidden":!0,children:(0,k.jsx)(U.Z,{headerIconExperience:i,onClick:()=>(0,D.nP)(z.sp.EXTERNAL_BUTTON_QUERY_PINTEREST_LOGO)},"HomeButton")}),l&&(0,k.jsx)(_.default,{anchor:this.logoButtonRef.current,experienceIds:[500613],noClickToDismiss:!0,placementId:19,shouldTimeoutDismiss:!0}),t.isTooltipOnLogoButtonShown&&(0,k.jsx)(G,{anchor:this.logoButtonRef.current})]}),(0,k.jsx)(o.xu,{flex:"grow"}),(0,k.jsx)(o.xu,{alignItems:"center","data-test-id":"button-container",display:"flex",children:(0,k.jsxs)(s.Fragment,{children:[(0,k.jsx)(o.xu,{ref:this.profileRef,children:(0,k.jsx)(K.Z,{children:(0,k.jsx)(O.Z,{isSelected:"profile"===r,onClick:()=>(0,D.nP)(z.sp.EXTERNAL_BUTTON_QUERY_AVATAR)})})}),(0,k.jsx)(x.Z,{currentSite:e,isPersistentArrUpsellEnabled:n,onClick:()=>(0,D.nP)(z.sp.EXTERNAL_BUTTON_QUERY_ACCOUNT_OPTIONS)})]})})]})}renderBusinessSsoPageHeader(){let{headerIconExperience:e}=this.state,{i18n:t}=this.props;return(0,k.jsxs)(o.xu,{alignItems:"center",column:12,display:"flex",height:56,children:[(0,k.jsx)(o.xu,{ref:this.logoButtonRef,"aria-hidden":!0,children:(0,k.jsx)(U.Z,{headerIconExperience:e,onClick:()=>(0,D.nP)(z.sp.SSO_PAGE_PINTEREST_LOGO)},"HomeButton")}),(0,k.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{letterSpacing:"-1px"}},children:(0,k.jsx)(o.X6,{accessibilityLevel:2,color:"default",overflow:"normal",size:"400",children:t._('Business', 'authHeader.logoText.business', 'Business text for the sso signup page header')})})]})}renderUnsubscribePageHeader(){let{headerIconExperience:e}=this.state,{history:t,i18n:n,trackInteraction:s}=this.props;return(0,k.jsxs)(o.xu,{alignItems:"center",column:12,display:"flex",height:56,children:[(0,k.jsx)(o.xu,{children:(0,k.jsx)(U.Z,{headerIconExperience:e,onClick:()=>(0,D.nP)(z.sp.UNSUBSCRIBE_PAGE_PINTEREST_LOGO)},"HomeButton")}),(0,k.jsx)(o.xu,{flex:"grow"}),(0,k.jsx)(o.xu,{alignItems:"center","data-test-id":"button-container",display:"flex",children:(0,k.jsx)(o.iP,{onTap:()=>{t.push("/"),s({action:"click",item:"back-to-pinterest",within:"unsubscribe-page"})},rounding:2,tapStyle:"compress",children:(0,k.jsxs)(o.kC,{alignItems:"center",justifyContent:"start",children:[(0,k.jsx)(o.xv,{inline:!0,size:"300",weight:"bold",children:n._('Back to Pinterest', 'header.backToPinterest.section', 'Button that allows one-click going back to Pinterest homefeed from email unsubscribe page')}),(0,k.jsx)(O.Z,{isSelected:!1,noNavigation:!0,onClick:()=>(0,D.nP)(z.sp.UNSUBSCRIBE_PAGE_AVATAR)})]})})})]})}renderHeaderContent(){let{location:e,viewer:t}=this.props;if((0,f.RU)(e)){let t=(0,y.mB)(e.search);if((0,u.Z)(t))return this.renderHomeButtonAndAccountSwitcher()}else if((0,f.OK)(e)&&t.isLimitedLogin)return this.renderUnsubscribePageHeader();else if((0,f.nU)(e))return this.renderBusinessSsoPageHeader();return this.renderButtons()}render(){let{headerShadowContext:{isScrolled:e,subheaderShadow:t},nags:n,showTypeaheadOverlay:s,isVerticalNavEnabled:i}=this.props;return(0,k.jsxs)(o.xu,{color:"default",column:12,dangerouslySetInlineStyle:{__style:{borderRadius:i&&s?`${q.kl}px ${q.kl}px 0 0`:void 0}},"data-test-id":"header-background",children:[n,(0,k.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{...null===t&&e?z.Rz:{}}},children:(0,k.jsx)(o.kC,{direction:"column",height:z.cI,justifyContent:"start",width:"100%",children:(0,k.jsx)(o.xu,{alignItems:"center",column:12,display:"flex",flex:"grow",paddingX:4,paddingY:1,children:this.renderHeaderContent()})})})]})}}function en(e){let t=(0,m.ZP)(),n=(0,J.X2)(),s=(0,T.B)(),{checkExperiment:o}=(0,g.F)(),{userAccountsRetrieved:r}=(0,A.N)(),h=(0,j.Z)(),{isFbAuthOnlyUser:u}=(0,$.t)(),{startPrefetchTimer:p,cancelPrefetchTimer:_,onNavigateToHomefeed:x}=(0,c.$)(),{onMouseDown:f,onNavigateToHomefeed:b}=(0,c.C)(),y=(0,a.Z)(),{appUI:{showTypeaheadOverlay:w}}=(0,S.I)();o("social_growth_holdout_2023_h2"),o("social_experience_holdout_2024_h1"),o("social_experience_holdout_2024_h2");let C=(0,l.Z)(!0),v=(0,P.Z)(),E=n&&Object.keys(n).map(e=>n[e]).filter(e=>e.showTooltip).length>0,I=(0,d.Z)("header");return(0,k.jsx)(et,{...e,cancelPrefetchTimer:_,headerButtonContext:(0,Z.p)(),headerShadowContext:(0,N.WQ)(),history:(0,i.k6)(),i18n:t,isIdeaPinRenamingEnabled:C,isMetricDAUExperimentEnabled:I,isPersistentArrUpsellEnabled:u,isTodayTabEligible:v,isVerticalNavEnabled:y,location:(0,i.TH)(),onMouseDownHomefeedPrefetch:f,onNavigateToHomefeed:x,onNavigateToHomefeedMousedownPrefetch:b,requestContext:s,showPersonalBoutique:e.viewer.show_personal_boutique??!1,showToolTipExp:E,showTypeaheadOverlay:w,startPrefetchTimer:p,trackInteraction:h,userAccountsRetrieved:r})}},19549:(e,t,n)=>{n.d(t,{Z:()=>a});var s=n(667294),i=n(149722),o=n(474373),r=n(901551),l=n(785893);function a({onNewsClick:e,onConversationsClick:t}){let{should_show_messaging:n}=(0,i.Z)();return(0,l.jsxs)(s.Fragment,{children:[(0,l.jsx)(o.Z,{onClick:e}),n&&(0,l.jsx)(r.Z,{onClick:t})]})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/AuthDesktopHeader-f340bbaadba086c2.mjs.map